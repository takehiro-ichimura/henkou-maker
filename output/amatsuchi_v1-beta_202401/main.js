(()=>{const e=(e,n)=>{let t=n.innerHTML+"";e.forEach((e=>{t=t.replace(`<span class="auto-burasage">${e}</span>`,e)}));let a=[];Array.prototype.forEach.call(t,(n=>{e.includes(n)&&a.push(n)}));let s=t.split(/。|、|」|』|〟|）|\)/);n.innerHTML=t;let o="";for(let e=0;e<s.length;e++){if(targetStr=a[e],o+=s[e],e==s.length-1){n.innerHTML=o;break}n.innerHTML=o+targetStr;const t=n.innerHTML+"",r=n.clientWidth;n.innerHTML=o+`<span class="auto-burasage">${targetStr}</span>`,n.clientWidth>=r?(n.innerHTML=t,o+=targetStr):o+=`<span class="auto-burasage">${targetStr}</span>`}},n=n=>{console.debug("burasage");const t=n.getElementsByTagName("p");for(let n=0;n<t.length;n++){const a=["。","、","」","』","〟","）",")"],s=t[n];s.classList.contains("burasage-off")||e(a,s)}},t=e=>{let t=window.innerHeight;n(e),window.addEventListener("resize",(function(){t!=window.innerHeight&&(n(e),t=window.innerHeight)}))},a=e=>{const n=e.getElementsByClassName("shatai");for(let e of n)e.innerHTML=s(e)},s=e=>{const n=[...e.childNodes];console.log(n);let t="";for(let e of n)console.log(e.nodeName),3==e.nodeType?t+=[...e.textContent].map((e=>`<span class="auto-shatai">${e}</span>`)).join(""):1==e.nodeType&&(e.innerHTML=s(e),t+=e.outerHTML),console.log(t);return t};document.addEventListener("DOMContentLoaded",(function(e){(()=>{const e=document.getElementsByClassName("amatsuchi");for(let n of e)a(n),n.classList.contains("burasage")&&t(n)})()}))})();